<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Fit Life Planner</title>
   <link rel="icon" type="image/x-icon" href="heart-rate.png">
  <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
  <style type="text/tailwindcss">
    @theme {
      --color-clifford: #da373d;
    }
  </style>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400..700&display=swap"
    rel="stylesheet"
  />
</head>

<body
  class="min-h-screen bg-gradient-to-b from-indigo-300 to-white flex flex-col items-center justify-center px-4 py-8"
>
  <!-- Top Header -->
  <div
    class="absolute top-4 left-6 sm:left-8 sm:top-8"
  >
    <a href="index.html">
    <button
      class="bg-opacity-10 text-white font-bold px-4 py-2 rounded-xl border border-white drop-shadow-xl"
    >
      Back
    </button></a>
  </div>

  <!-- Logo -->
  <div class="mb-4 w-full max-w-xl px-4 sm:px-0">
    <h1
      style="font-family: 'Dancing Script', cursive;"
      class="text-center pt-6 text-3xl sm:text-5xl font-bold text-shadow-lg text-white"
    >
      Fit Life Planner
    </h1>
  </div>

  <!-- Card -->
  <div
    class="bg-white w-full max-w-md rounded-3xl shadow-lg px-6 py-8 sm:px-8 sm:py-10"
  >
    <h2 class="text-xl sm:text-2xl font-semibold text-center mb-6">
      Create An Account
    </h2>
    

    <!-- Form -->
    <form class="space-y-4">


      <input
        type="text"
        placeholder="First Name"
        class="w-full px-3 py-2 sm:px-4 sm:py-3 rounded-xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-300"
      />
      <input
        type="text"
        placeholder="Last Name"
        class="w-full px-3 py-2 sm:px-4 sm:py-3 rounded-xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-300"
      />
      <input
        type="email"
        placeholder="Email Address"
        class="w-full px-3 py-2 sm:px-4 sm:py-3 rounded-xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-300"
      />
      <div class="relative">
        <input
          type="password"
          placeholder="Password"
          class="w-full px-3 py-2 sm:px-4 sm:py-3 rounded-xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-300"
        />
        <span class="absolute right-3 top-3.5 text-gray-400"></span>
      </div>
     <!-- Role Selection -->
    <div>
      <select
        id="role"
        class="w-full px-3 py-2 sm:px-4 sm:py-3 rounded-xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-300 text-gray-700"
      >
        <option value="" disabled selected>Select Role</option>
        <option value="user">User</option>
        <option value="dietitian">Dietitian</option>
        <option value="admin">Admin</option>
      </select>
    </div>

    <!-- Create Account Button -->
    <button
      id="createBtn"
      type="button"
      class="block text-center w-full bg-indigo-400 text-white font-semibold py-3 rounded-xl hover:bg-indigo-500 transition text-sm sm:text-base"
    >
      Create An Account
    </button>

    </form>

  </div>
<!-- Already have account text -->
<div class="text-center mt-4 text-sm text-gray-600">
  Already have an account?
  <a href="login.html" class="text-indigo-500 font-semibold hover:underline">
    Sign In
  </a>
</div>

  <script>
document.getElementById("createBtn").addEventListener("click", async function () {
  const first_name = document.querySelector('input[placeholder="First Name"]').value;
  const last_name = document.querySelector('input[placeholder="Last Name"]').value;
  const email = document.querySelector('input[type="email"]').value;
  const password = document.querySelector('input[type="password"]').value;
  const role = document.getElementById("role").value;

  if (!first_name || !last_name || !email || !password || !role) {
    alert("Please fill all fields and select a role");
    return;
  }

  try {
    const response = await fetch("api/register.php", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ first_name, last_name, email, password, role })
    });

    const data = await response.json();
    if (data.success) {
      // redirect based on role
      if (role === "user") window.location.href = "profile.html";
      else if (role === "dietitian") window.location.href = "dietitian_dashboard.html";
      else if (role === "admin") window.location.href = "admin_dashboard.html";
    } else {
      alert(data.error || "Registration failed");
    }
  } catch (err) {
    console.error(err);
    alert("Server error");
  }
});
</script>


</body>
</html>
